/*==========================================================================
 *  CoMPhy Lab — Obsidian Publish Stylesheet
 *  Academic editorial aesthetic · Peter-inspired palette · Monospace body
 *
 *  1. Google Fonts Import + Reset
 *  2. Design Token System
 *  3. Dark Theme
 *  4. Light Theme
 *  5. Typography
 *  6. Layout & Content Width
 *  7. Content Components
 *  8. Code Blocks
 *  9. Math / LaTeX
 * 10. Obsidian Publish UI
 * 11. Responsive Design
 * 12. Print + Accessibility
 *==========================================================================*/


/* ==========================================================================
   1. Google Fonts Import + Reset
   ========================================================================== */

@import url("https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&family=IBM+Plex+Mono:ital,wght@0,400;0,500;0,600;1,400&display=swap");

html {
  scroll-behavior: smooth;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}


/* ==========================================================================
   2. Design Token System
   ========================================================================== */

:root {
  /* Peter-inspired anchor colors */
  --steipete-dark-bg: #212737;
  --steipete-dark-panel: #273148;
  --steipete-dark-panel-2: #2f3a54;
  --steipete-light-bg: #fdfdfd;
  --steipete-light-panel: #f5f7fb;
  --steipete-light-panel-2: #edf1f8;
  --steipete-orange: #ff6b01;
  --steipete-blue: #006cac;
  --steipete-blue-bright: #7db8ff;

  /* Accent family (theme-specific overrides below) */
  --accent-700: #4f1d00;
  --accent-650: #632500;
  --accent-600: #7a2f00;
  --accent-550: #933a00;
  --accent-500: #ff6b01;
  --accent-450: #ff7000;
  --accent-400: #ff7a00;
  --accent-350: #ff8a12;
  --accent-300: #ffa23a;
  --accent-250: #ffba6a;
  --accent-200: #ffd5a5;
  --accent-150: #ffead1;
  --accent-rgb: 255, 107, 1;

  /* Supporting accents */
  --support-aqua-500: #8fd8d1;
  --support-green-500: #91d39d;
  --support-olive-500: #b8cf58;
  --support-yellow-500: #ffcf5c;
  --support-orange-500: #ff6b01;
  --support-blue-500: #7db8ff;
  --support-red-500: #ff7a66;

  /* Neutral ramps */
  --dark-0: #151a27;
  --dark-1: #1b2132;
  --dark-2: #212737;
  --dark-3: #273148;
  --dark-4: #2f3a54;
  --dark-5: #374460;
  --light-0: #fdfdfd;
  --light-1: #f8f9fb;
  --light-2: #f2f4f8;
  --light-3: #e6ebf4;
  --light-4: #c8d2e1;
  --light-5: #9daac0;

  /* Typography */
  --font-text: "IBM Plex Mono", "JetBrains Mono", "Hack", monospace;
  --font-display: "Atkinson Hyperlegible", "Alegreya Sans", "IBM Plex Sans", sans-serif;
  --font-mono: "IBM Plex Mono", "JetBrains Mono", "Hack", monospace;

  --font-size-body: 16px;
  --font-size-code: 0.92em;
  --line-height-body: 1.68;
  --math-scale: 1.2;

  --h1-size: 2.05rem;
  --h2-size: 1.68rem;
  --h3-size: 1.44rem;
  --h4-size: 1.28rem;
  --h5-size: 1.12rem;
  --h6-size: 1rem;

  --weight-regular: 430;
  --weight-medium: 520;
  --weight-semibold: 620;
  --weight-bold: 720;

  /* Layout */
  --content-width: 960px;

  --radius-xs: 4px;
  --radius-sm: 7px;
  --radius-md: 11px;
  --radius-lg: 14px;
  --radius-pill: 999px;

  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;

  --shadow-soft: 0 4px 14px rgba(0, 0, 0, 0.18);
  --shadow-mid: 0 10px 28px rgba(0, 0, 0, 0.28);

  --motion-fast: 140ms;
  --motion-medium: 220ms;
  --easing-standard: cubic-bezier(0.2, 0, 0.2, 1);
}


/* ==========================================================================
   3. Dark Theme
   ========================================================================== */

.theme-dark {
  --accent-700: #4f1d00;
  --accent-650: #632500;
  --accent-600: #7a2f00;
  --accent-550: #933a00;
  --accent-500: #ff6b01;
  --accent-450: #ff7000;
  --accent-400: #ff7a00;
  --accent-350: #ff8a12;
  --accent-300: #ffa23a;
  --accent-250: #ffba6a;
  --accent-200: #ffd5a5;
  --accent-150: #ffead1;
  --accent-rgb: 255, 107, 1;

  --background-primary: var(--steipete-dark-bg);
  --background-primary-alt: #1e2639;
  --background-secondary: var(--steipete-dark-panel);
  --background-secondary-alt: var(--steipete-dark-panel-2);

  --text-normal: #eaedf3;
  --text-secondary: #cfd7e7;
  --text-muted: #acb8cf;
  --text-faint: #8e9ab2;

  --border-subtle: rgba(171, 75, 8, 0.34);
  --border-strong: rgba(255, 107, 1, 0.56);
  --background-modifier-border: var(--border-subtle);

  --link-color: var(--steipete-blue-bright);
  --link-hover: #a9d4ff;
  --link-external: #88d6c9;

  --heading-1: #d7a7ff;
  --heading-2: #ff931f;
  --heading-3: #ffab33;
  --heading-4: #9bd8ff;
  --heading-5: #99e6dc;
  --heading-6: #b8c9ff;

  --tag-text: #fff6ed;
  --selection-bg: rgba(var(--accent-rgb), 0.28);
  --focus-ring: #ff9d52;

  --text-accent: #ffd3ad;
  --interactive-accent: var(--accent-500);

  --pre-code: #1b2438;
  --code-normal: #e4ebf7;
  --code-comment: #8a97b1;
  --code-function: #90e2d9;
  --code-keyword: #ffb57c;
  --code-string: #c1dc80;
  --code-number: #ffd17b;
  --code-operator: #ff9e6b;
  --code-type: #8bc6ff;
  --code-property: #d7a7ff;

  --blockquote-border: rgba(var(--accent-rgb), 0.76);
  --blockquote-bg: rgba(var(--accent-rgb), 0.12);

  --highlight-bg: rgba(255, 207, 92, 0.34);
  --strong-color: #ffd7b8;
  --em-color: #a9d39d;
}


/* ==========================================================================
   4. Light Theme
   ========================================================================== */

.theme-light {
  --accent-700: #003b5d;
  --accent-650: #004a74;
  --accent-600: #00588a;
  --accent-550: #00609a;
  --accent-500: #006cac;
  --accent-450: #1f7fc0;
  --accent-400: #3a90d1;
  --accent-350: #5ba4df;
  --accent-300: #7ab9eb;
  --accent-250: #9ecef5;
  --accent-200: #c3e2fb;
  --accent-150: #e0f1ff;
  --accent-rgb: 0, 108, 172;

  --background-primary: var(--steipete-light-bg);
  --background-primary-alt: #f8f9fb;
  --background-secondary: var(--steipete-light-panel);
  --background-secondary-alt: var(--steipete-light-panel-2);

  --text-normal: #282728;
  --text-secondary: #40424a;
  --text-muted: #5f6574;
  --text-faint: #798195;

  --border-subtle: rgba(236, 233, 233, 0.95);
  --border-strong: rgba(0, 108, 172, 0.28);
  --background-modifier-border: var(--border-subtle);

  --link-color: var(--steipete-blue);
  --link-hover: #005891;
  --link-external: #0b7e9a;

  --heading-1: #543b8f;
  --heading-2: #a45d19;
  --heading-3: #8c6826;
  --heading-4: #1b6f88;
  --heading-5: #2e6f63;
  --heading-6: #425d9d;

  --tag-text: #f5fbff;
  --selection-bg: rgba(var(--accent-rgb), 0.2);
  --focus-ring: var(--steipete-blue);

  --text-accent: #005c92;
  --interactive-accent: var(--accent-450);

  --pre-code: #eef3fb;
  --code-normal: #24334a;
  --code-comment: #6b7a96;
  --code-function: #0b6f8d;
  --code-keyword: #005b8f;
  --code-string: #4f7a00;
  --code-number: #8a6200;
  --code-operator: #a14f00;
  --code-type: #0f6e8a;
  --code-property: #3a5c99;

  --blockquote-border: rgba(var(--accent-rgb), 0.62);
  --blockquote-bg: rgba(var(--accent-rgb), 0.08);

  --highlight-bg: rgba(var(--accent-rgb), 0.17);
  --strong-color: #17456c;
  --em-color: #2d6d47;
}


/* ==========================================================================
   5. Typography
   ========================================================================== */

html,
body {
  font-family: var(--font-text);
  font-size: var(--font-size-body);
  line-height: var(--line-height-body);
  color: var(--text-normal);
  font-weight: var(--weight-regular);
}

body {
  background: var(--background-primary);
}

/* --- Headings --- */

h1, h2, h3, h4, h5, h6,
.markdown-preview-view h1,
.markdown-preview-view h2,
.markdown-preview-view h3,
.markdown-preview-view h4,
.markdown-preview-view h5,
.markdown-preview-view h6 {
  font-family: var(--font-display);
  line-height: 1.2;
  letter-spacing: 0.01em;
}

h1, .markdown-preview-view h1 {
  color: var(--heading-1);
  font-size: var(--h1-size);
  font-weight: var(--weight-bold);
  margin-top: var(--space-6);
  margin-bottom: var(--space-3);
  padding-bottom: var(--space-2);
  border-bottom: 1px solid var(--heading-1);
}

.theme-dark h1,
.theme-dark .markdown-preview-view h1 {
  border-bottom-color: rgba(var(--accent-rgb), 0.34);
}

.theme-light h1,
.theme-light .markdown-preview-view h1 {
  border-bottom-color: rgba(var(--accent-rgb), 0.34);
}

h2, .markdown-preview-view h2 {
  color: var(--heading-2);
  font-size: var(--h2-size);
  font-weight: var(--weight-semibold);
  margin-top: var(--space-6);
  margin-bottom: var(--space-3);
}

h3, .markdown-preview-view h3 {
  color: var(--heading-3);
  font-size: var(--h3-size);
  font-weight: var(--weight-semibold);
  margin-top: var(--space-5);
  margin-bottom: var(--space-2);
}

h4, .markdown-preview-view h4 {
  color: var(--heading-4);
  font-size: var(--h4-size);
  font-weight: var(--weight-semibold);
  margin-top: var(--space-4);
  margin-bottom: var(--space-2);
}

h5, .markdown-preview-view h5 {
  color: var(--heading-5);
  font-size: var(--h5-size);
  font-weight: var(--weight-medium);
  margin-top: var(--space-4);
  margin-bottom: var(--space-1);
}

h6, .markdown-preview-view h6 {
  color: var(--heading-6);
  font-size: var(--h6-size);
  font-weight: var(--weight-medium);
  margin-top: var(--space-3);
  margin-bottom: var(--space-1);
}

/* --- Inline emphasis --- */

strong,
b {
  color: var(--strong-color);
  font-weight: var(--weight-semibold);
}

em,
i {
  color: var(--em-color);
}

u {
  color: var(--accent-300);
}

del {
  color: var(--text-muted);
}

sup,
sub {
  color: var(--support-yellow-500);
}

/* --- Links --- */

a {
  color: var(--link-color);
  text-decoration: none;
  text-underline-offset: 0.18em;
  transition: color var(--motion-fast) var(--easing-standard);
}

a:hover {
  color: var(--link-hover);
  text-decoration: underline;
  text-decoration-color: var(--link-hover);
}

a.external-link {
  color: var(--link-external);
  background-image: none;
  padding-right: 0;
}

a.external-link:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

/* --- Highlights --- */

mark {
  background: var(--highlight-bg);
  color: var(--text-normal);
  border-radius: var(--radius-xs);
  padding: 0 0.2em;
}

/* --- Selection --- */

::selection {
  background: var(--selection-bg);
}


/* ==========================================================================
   6. Layout & Content Width
   ========================================================================== */

body {
  --file-line-width: 960px;
  --line-width: 960px;
  --max-width: 960px;
  background: var(--background-primary);
}

.theme-dark body,
body.theme-dark {
  background:
    radial-gradient(1200px 600px at 6% -5%, rgba(125, 184, 255, 0.12), transparent 60%),
    radial-gradient(1000px 580px at 92% 0%, rgba(255, 107, 1, 0.1), transparent 55%),
    var(--background-primary);
}

.theme-light body,
body.theme-light {
  background: var(--background-primary);
}

.markdown-preview-view {
  color: var(--text-normal);
}

.markdown-preview-view p {
  margin-block: var(--space-2);
}


/* ==========================================================================
   7. Content Components
   ========================================================================== */

/* --- Lists --- */

.markdown-preview-view ul,
.markdown-preview-view ol {
  margin-block: var(--space-2);
  padding-inline-start: 1.45rem;
}

.markdown-preview-view ul > li::marker {
  color: var(--accent-350);
}

.markdown-preview-view ol > li::marker {
  color: var(--support-orange-500);
  font-weight: var(--weight-medium);
}

/* --- Blockquotes --- */

blockquote,
.markdown-preview-view blockquote {
  border-left: 4px solid var(--blockquote-border);
  background: linear-gradient(95deg, var(--blockquote-bg), transparent 70%);
  border-radius: 0 var(--radius-md) var(--radius-md) 0;
  padding: var(--space-2) var(--space-4);
  margin-inline: 0;
}

/* --- Callouts --- */

.callout {
  border-radius: var(--radius-md);
  border: 1px solid rgba(var(--accent-rgb), 0.3);
  background: linear-gradient(160deg, rgba(var(--accent-rgb), 0.08), transparent 60%);
}

.callout .callout-title {
  font-weight: var(--weight-semibold);
}

.theme-dark .callout .callout-title {
  color: var(--accent-250);
}

.theme-light .callout .callout-title {
  color: var(--accent-600);
}

/* Callout type color overrides */
.callout[data-callout="note"] {
  border-color: rgba(125, 168, 216, 0.4);
  background: linear-gradient(160deg, rgba(125, 168, 216, 0.08), transparent 60%);
}

.callout[data-callout="tip"] {
  border-color: rgba(142, 192, 124, 0.4);
  background: linear-gradient(160deg, rgba(142, 192, 124, 0.08), transparent 60%);
}

.callout[data-callout="warning"],
.callout[data-callout="caution"] {
  border-color: rgba(254, 128, 25, 0.4);
  background: linear-gradient(160deg, rgba(254, 128, 25, 0.08), transparent 60%);
}

.callout[data-callout="important"],
.callout[data-callout="danger"] {
  border-color: rgba(251, 73, 52, 0.4);
  background: linear-gradient(160deg, rgba(251, 73, 52, 0.08), transparent 60%);
}

/* --- Tables --- */

table {
  width: 100%;
  border-collapse: collapse;
  border-spacing: 0;
  border: 1px solid var(--background-modifier-border);
  border-radius: var(--radius-sm);
  overflow: hidden;
  word-break: initial;
}

table th,
table td {
  border: 1px solid var(--background-modifier-border);
  padding: 0.5rem 0.8rem;
  text-align: left;
}

table th {
  font-weight: var(--weight-semibold);
}

.theme-dark table th {
  background: rgba(var(--accent-rgb), 0.16);
}

.theme-light table th {
  background: rgba(var(--accent-rgb), 0.08);
}

.theme-dark table tr:nth-child(even) td {
  background: rgba(255, 255, 255, 0.03);
}

.theme-light table tr:nth-child(even) td {
  background: rgba(var(--accent-rgb), 0.03);
}

/* Responsive table wrapper */
.markdown-preview-view .table-wrapper {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* --- Images --- */

img,
.markdown-preview-view img {
  max-width: 100%;
  height: auto;
  display: block;
  margin-left: auto;
  margin-right: auto;
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow-soft);
  transition: transform var(--motion-medium) var(--easing-standard);
}

.markdown-preview-view img:hover {
  transform: scale(1.02);
}

/* --- Horizontal Rule --- */

.markdown-preview-view hr {
  margin-block-start: 4em;
  margin-block-end: 4em;
  border: none;
  height: 2px;
  max-width: min(75%, calc(100% - 280px));
  margin-left: auto;
  margin-right: auto;
  background-image: linear-gradient(
    to right,
    transparent 0%,
    rgba(var(--accent-rgb), 0.3) 16%,
    rgba(var(--accent-rgb), 0.5) 50%,
    rgba(var(--accent-rgb), 0.3) 84%,
    transparent 100%
  );
}

.markdown-preview-view hr::after {
  content: "ᛟ";
  display: inline-block;
  position: absolute;
  left: 50%;
  transform: translate(-50%, -50%);
  transform-origin: 50% 50%;
  padding: 0.5rem;
  color: var(--support-aqua-500);
  background-color: var(--background-primary);
}

/* --- Tags --- */

a.tag {
  background: linear-gradient(120deg, var(--accent-400), var(--accent-500));
  color: var(--tag-text) !important;
  border-radius: var(--radius-pill);
  padding: 0.13em 0.6em;
  border: 1px solid rgba(var(--accent-rgb), 0.28);
  font-size: 0.85em;
  font-weight: var(--weight-medium);
  text-decoration: none !important;
  transition: filter var(--motion-fast) var(--easing-standard);
}

a.tag:hover {
  filter: brightness(1.06) saturate(1.02);
  text-decoration: none !important;
}

/* --- Checkboxes --- */

input[type="checkbox"] {
  border: 1px solid rgba(var(--accent-rgb), 0.36);
  border-radius: var(--radius-xs);
}

input[type="checkbox"]:checked {
  background: linear-gradient(145deg, var(--accent-400), var(--accent-500));
  border-color: var(--accent-350);
}

/* --- Definition lists --- */

dt {
  font-weight: var(--weight-semibold);
}

dd {
  font-weight: var(--weight-regular);
}

/* --- Aside elements --- */

aside {
  width: 40%;
  padding-left: 0.5rem;
  margin-left: 1rem;
  margin-top: 0.5rem;
  float: right;
  box-shadow: inset 5px 0 5px -5px rgba(125, 168, 216, 0.6);
  font-style: italic;
  color: var(--text-muted);
}

aside > p {
  margin: 0.5rem;
}

/* --- Embeds --- */

.markdown-embed {
  border-left: 2px solid rgba(var(--accent-rgb), 0.46);
  border-right: 0;
  border-top: 0;
  border-bottom: 0;
  padding-left: 10px;
  padding-right: 10px;
  margin-left: 10px;
  margin-right: 10px;
}

.markdown-embed-title {
  font-weight: var(--weight-semibold);
}


/* ==========================================================================
   8. Code Blocks
   ========================================================================== */

/* --- Inline code --- */

.markdown-preview-view code {
  font-family: var(--font-mono);
  font-size: var(--font-size-code);
  color: var(--code-normal);
  background: var(--pre-code);
  border: 1px solid var(--background-modifier-border);
  border-radius: var(--radius-xs);
  padding: 0.08em 0.38em;
}

/* --- Code blocks --- */

.markdown-preview-view pre {
  background: linear-gradient(170deg, var(--pre-code), var(--pre-code));
  color: var(--code-normal);
  border: 1px solid var(--background-modifier-border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-soft);
  padding: var(--space-4);
  overflow-x: auto;
}

.markdown-preview-view pre code {
  font-size: var(--font-size-code);
  line-height: 1.4;
  display: block;
  background: transparent;
  border: none;
  padding: 0;
  color: inherit;
}

/* --- Syntax highlighting --- */

.token.keyword { color: var(--code-keyword); }
.token.function { color: var(--code-function); }
.token.comment { color: var(--code-comment); }
.token.string { color: var(--code-string); }
.token.number,
.token.boolean { color: var(--code-number); }
.token.operator,
.token.punctuation { color: var(--code-operator); }
.token.class-name,
.token.builtin { color: var(--code-type); }
.token.property,
.token.attr-name { color: var(--code-property); }

/* --- Language labels --- */

pre[class*="language-"] {
  padding-top: 1.6rem;
  position: relative;
}

pre.language-javascript::before,
pre.language-js::before,
pre.language-typescript::before,
pre.language-ts::before,
pre.language-python::before,
pre.language-py::before,
pre.language-css::before,
pre.language-html::before,
pre.language-bash::before,
pre.language-shell::before,
pre.language-c::before,
pre.language-cpp::before,
pre.language-latex::before,
pre.language-tex::before,
pre.language-matlab::before,
pre.language-r::before,
pre.language-julia::before,
pre.language-yaml::before,
pre.language-json::before,
pre.language-markdown::before,
pre.language-md::before,
pre.language-info::before {
  position: absolute;
  top: 0.35rem;
  right: 0.65rem;
  font-family: var(--font-display);
  font-size: 0.72rem;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  color: var(--accent-200);
  opacity: 0.9;
}

pre.language-javascript::before,
pre.language-js::before { content: "JavaScript"; }
pre.language-typescript::before,
pre.language-ts::before { content: "TypeScript"; }
pre.language-python::before,
pre.language-py::before { content: "Python"; }
pre.language-css::before { content: "CSS"; }
pre.language-html::before { content: "HTML"; }
pre.language-bash::before,
pre.language-shell::before { content: "Shell"; }
pre.language-c::before { content: "C"; }
pre.language-cpp::before { content: "C++"; }
pre.language-latex::before,
pre.language-tex::before { content: "LaTeX"; }
pre.language-matlab::before { content: "MATLAB"; }
pre.language-r::before { content: "R"; }
pre.language-julia::before { content: "Julia"; }
pre.language-yaml::before { content: "YAML"; }
pre.language-json::before { content: "JSON"; }
pre.language-markdown::before,
pre.language-md::before { content: "Markdown"; }
pre.language-info::before { content: "Info"; }


/* ==========================================================================
   9. Math / LaTeX
   ========================================================================== */

.MJX-TEX,
mjx-container,
.math {
  font-size: calc(1em * var(--math-scale));
}

mjx-container[display="true"],
.math-block {
  margin-block: var(--space-4);
  overflow-x: auto;
  overflow-y: hidden;
}


/* ==========================================================================
   10. Obsidian Publish UI
   ========================================================================== */

.site-header,
.site-footer,
.site-body-left-column,
.site-body-center-column,
.site-body-right-column {
  background: var(--background-secondary);
}

.site-header {
  border-bottom: 1px solid var(--border-subtle);
}

.site-footer {
  border-top: 1px solid var(--border-subtle);
}

.site-body-left-column,
.site-body-center-column {
  border-right: 1px solid var(--border-subtle);
}

.site-body-right-column {
  border-left: 1px solid var(--border-subtle);
}

.search-input-container input,
.search-input,
input[type="search"] {
  background: var(--background-primary-alt);
  border: 1px solid var(--background-modifier-border);
  color: var(--text-normal);
  border-radius: var(--radius-sm);
}

.search-input-container input::placeholder,
.search-input::placeholder {
  color: var(--text-faint);
}

/* --- Sidebar navigation --- */

.nav-file-title,
.nav-folder-title {
  font-family: var(--font-display);
  border-radius: var(--radius-sm);
  transition: background var(--motion-fast) var(--easing-standard);
}

.nav-file-title:hover,
.nav-folder-title:hover {
  background: rgba(var(--accent-rgb), 0.12);
}

.nav-file-title.is-active {
  background: linear-gradient(120deg, rgba(var(--accent-rgb), 0.55), rgba(var(--accent-rgb), 0.45));
  color: var(--tag-text);
}

/* --- Table of Contents / Outline --- */

.outline {
  font-size: 0.92rem;
  font-weight: var(--weight-regular);
  font-family: var(--font-display);
}

.outline .tree-item {
  line-height: 1.3;
}

.outline .tree-item-self {
  padding: 0.2rem 0.3rem 0.1rem 0.5rem;
  border-radius: var(--radius-sm);
  transition: background var(--motion-fast) var(--easing-standard);
}

.outline .tree-item-self:hover {
  background: rgba(var(--accent-rgb), 0.12);
}

.outline .tree-item-inner {
  font-weight: var(--weight-regular);
}

.outline .tree-item-children {
  margin-left: 0.7rem;
  padding-left: 0.5rem;
  border-left: 1px solid var(--accent-350);
  border-radius: var(--radius-xs);
  transition: border-color var(--motion-medium) var(--easing-standard);
}

.outline .tree-item-children:hover {
  border-left-color: var(--accent-250);
}

/* --- Graph view --- */

.graph-view.color-circle,
.graph-view.color-fill-highlight,
.graph-view.color-line-highlight {
  color: var(--support-aqua-500) !important;
}

.graph-view.color-fill-focused {
  color: var(--accent-350) !important;
}

.graph-view.color-text {
  color: var(--text-secondary) !important;
}

.graph-view.color-fill-tag {
  color: var(--support-yellow-500) !important;
}

.graph-view.color-fill-unresolved {
  color: var(--support-red-500) !important;
}

.graph-view.color-fill-attachment {
  color: var(--support-blue-500) !important;
}

/* --- Search --- */

.search-result-file-title {
  font-family: var(--font-display);
  font-weight: var(--weight-medium);
  color: var(--accent-300);
}

.search-result-file-matches {
  color: var(--text-secondary);
}

.search-result-file-matched-text {
  background: var(--highlight-bg);
}

/* --- Site header/footer --- */

.site-header,
.site-footer,
.published-section-header {
  font-family: var(--font-display);
}

/* --- Publish site name --- */

.publish-site-name {
  font-family: var(--font-display);
  font-weight: var(--weight-bold);
  letter-spacing: 0.02em;
}


/* ==========================================================================
   11. Responsive Design
   ========================================================================== */

@media (max-width: 768px) {
  h1, .markdown-preview-view h1 { font-size: 1.7rem; }
  h2, .markdown-preview-view h2 { font-size: 1.4rem; }
  h3, .markdown-preview-view h3 { font-size: 1.25rem; }
  h4, .markdown-preview-view h4 { font-size: 1.12rem; }

  .markdown-preview-view hr {
    max-width: 90%;
    margin-block-start: 2.5em;
    margin-block-end: 2.5em;
  }

  aside {
    width: 100%;
    float: none;
    margin-left: 0;
  }
}

@media (max-width: 480px) {
  h1, .markdown-preview-view h1 { font-size: 1.5rem; }
  h2, .markdown-preview-view h2 { font-size: 1.3rem; }
  h3, .markdown-preview-view h3 { font-size: 1.15rem; }
  h4, .markdown-preview-view h4 { font-size: 1.05rem; }

  .markdown-preview-view img:hover {
    transform: none;
  }

  table {
    font-size: 0.9em;
  }
}


/* ==========================================================================
   12. Print + Accessibility
   ========================================================================== */

@media print {
  :root,
  .theme-dark,
  .theme-light {
    --background-primary: #ffffff;
    --background-primary-alt: #ffffff;
    --background-secondary: #ffffff;
    --background-secondary-alt: #f4f4f4;
    --text-normal: #000000;
    --text-secondary: #111111;
    --text-muted: #333333;
    --text-faint: #555555;
    --background-modifier-border: #cccccc;
    --border-subtle: #cccccc;
    --border-strong: #999999;
    --link-color: #000000;
    --link-hover: #000000;
    --link-external: #000000;
    --heading-1: #000000;
    --heading-2: #111111;
    --heading-3: #222222;
    --heading-4: #222222;
    --heading-5: #333333;
    --heading-6: #333333;
    --pre-code: #f4f4f4;
    --code-normal: #000000;
    --code-comment: #555555;
    --code-function: #000000;
    --code-keyword: #000000;
    --code-string: #333333;
    --code-number: #333333;
    --code-operator: #000000;
    --code-type: #000000;
    --code-property: #000000;
    --blockquote-border: #999999;
    --blockquote-bg: transparent;
    --highlight-bg: #ffffcc;
    --strong-color: #000000;
    --em-color: #000000;
    --selection-bg: transparent;
    --tag-text: #000000;
  }

  body,
  .markdown-preview-view {
    background: #ffffff !important;
    color: #000000 !important;
    max-width: 100% !important;
  }

  .site-header,
  .site-footer,
  .outline,
  .graph-view-container,
  nav {
    display: none !important;
  }

  h2 {
    page-break-before: always;
  }

  h3,
  h4 {
    page-break-after: avoid;
  }

  pre,
  blockquote,
  table {
    page-break-inside: avoid;
  }

  /* Double hr for manual page breaks */
  hr + hr {
    page-break-before: always;
    visibility: hidden;
  }

  :not(hr) + hr {
    visibility: hidden;
  }

  :not(hr) + hr + :not(hr):not(h2) {
    border-top: 1px solid black;
    padding-top: 2em;
  }

  img {
    max-width: 80% !important;
    box-shadow: none !important;
  }

  a {
    color: #000000 !important;
    text-decoration: underline !important;
  }

  a.tag {
    background: none !important;
    color: #000000 !important;
    border: 1px solid #cccccc !important;
  }
}

/* --- Reduced motion --- */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
}

/* --- Focus visible --- */

a:focus-visible,
button:focus-visible,
input:focus-visible,
[role="button"]:focus-visible {
  outline: 2px solid var(--focus-ring);
  outline-offset: 2px;
  box-shadow: 0 0 0 3px rgba(var(--accent-rgb), 0.24);
}

/* --- Highlight classes (for Highlightr plugin compatibility) --- */

.hltr-red { background-color: var(--support-red-500) !important; }
.hltr-orange { background-color: var(--support-orange-500) !important; }
.hltr-yellow { background-color: var(--support-yellow-500) !important; }
.hltr-green { background-color: var(--support-green-500) !important; }
.hltr-aqua { background-color: var(--support-aqua-500) !important; }
.hltr-blue { background-color: var(--support-blue-500) !important; }
.hltr-purple { background-color: var(--accent-400) !important; }
.hltr-magenta { background-color: var(--accent-400) !important; }
.hltr-grey { background-color: var(--light-5) !important; }
